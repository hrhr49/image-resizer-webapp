{"version":3,"sources":["script.ts","node_modules/parcel-bundler/src/builtins/bundle-url.js","node_modules/parcel-bundler/src/builtins/css-loader.js"],"names":["bundleURL","getBundleURLCached","getBundleURL","Error","err","matches","stack","match","getBaseURL","url","replace","exports","bundle","require","updateLink","link","newLink","cloneNode","onload","remove","href","split","Date","now","parentNode","insertBefore","nextSibling","cssTimeout","reloadCSS","setTimeout","links","document","querySelectorAll","i","length","module"],"mappings":"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","file":"script.221c08a2.js","sourceRoot":"..","sourcesContent":["import './style.css';\n\nconst sizes = [72, 96, 120, 128, 144, 152, 180, 192, 384, 512];\nconst fileInput: HTMLInputElement = document.forms['file-form'].elements['file-input'];\n\nconst addImageAndDownloadButton = async (file: File, width: number, height: number) => {\n  // 画像をリサイズする\n  const image = new Image();\n  const reader = new FileReader();\n\n  reader.readAsDataURL(file);\n\n  const imgSrc: string = await new Promise<string>((resolve) => {\n    reader.onload = (e: ProgressEvent<FileReader>) => {\n      resolve(e.target.result.toString());\n    }\n  });\n\n  image.src = imgSrc;\n\n  const canvas = await new Promise<HTMLCanvasElement>((resolve) => {\n    image.onload = () => {\n      const canvas: HTMLCanvasElement = document.createElement('canvas');\n      canvas.setAttribute('width', width.toString());\n      canvas.setAttribute('height', height.toString());\n\n      var ctx = canvas.getContext('2d');\n\n      // canvasに既に描画されている画像をクリア\n      ctx.clearRect(0, 0, width, height);\n      // canvasに画像を描画\n      ctx.drawImage(image, 0, 0, image.width, image.height, 0, 0, width, height);\n      resolve(canvas);\n    }\n  });\n\n  const downloadButton = document.createElement('button');\n  downloadButton.textContent = `download icon-${width}x${height}.png`;\n\n  downloadButton.addEventListener('click', () => {\n    const a = document.createElement(\"a\");\n    a.href = canvas.toDataURL(\"image/png\");\n    a.setAttribute(\"download\", `icon-${width}x${height}.png`);\n    a.dispatchEvent(new MouseEvent(\"click\"));\n  });\n\n  return {\n    canvas,\n    downloadButton,\n  };\n};\n\nconst onFileUpload = async (file: File) => {\n  if (!['image/jpeg', 'image/jpg', 'image/png'].includes(file.type)) {\n    alert('cannot read file. jpeg or png is supported.')\n    return;\n  }\n\n  const div = document.getElementById('image-area');\n\n  // remove previous result\n  div.textContent = '';\n\n  for (const size of sizes) {\n    const {canvas, downloadButton} = await addImageAndDownloadButton(file, size, size);\n    const div2 = document.createElement('div');\n    const div3 = document.createElement('div');\n    const div4 = document.createElement('div');\n    div2.appendChild(canvas);\n    div3.appendChild(downloadButton);\n    div4.appendChild(div2);\n    div4.appendChild(div3);\n    div4.style.border = 'solid 1px blue';\n    div.appendChild(div4);\n  }\n}\n\nfileInput.addEventListener('change', async () => {\n  const file: File = fileInput.files[0];\n  await onFileUpload(file);\n});\n\nconst uploadArea = document.getElementById('upload-area') as HTMLDivElement;\n\nuploadArea.addEventListener('dragover', (e) => {\n  e.preventDefault();\n  uploadArea.classList.add('drag');\n});\n\nuploadArea.addEventListener('dragleave', () => {\n  uploadArea.classList.remove('drag');\n});\n\nuploadArea.addEventListener('drop', (e) => {\n  e.preventDefault();\n  uploadArea.classList.remove('drag');\n  const files = e.dataTransfer.files;\n  fileInput.files = files;\n  onFileUpload(files[0]);\n});\n","var bundleURL = null;\nfunction getBundleURLCached() {\n  if (!bundleURL) {\n    bundleURL = getBundleURL();\n  }\n\n  return bundleURL;\n}\n\nfunction getBundleURL() {\n  // Attempt to find the URL of the current script and use that as the base URL\n  try {\n    throw new Error;\n  } catch (err) {\n    var matches = ('' + err.stack).match(/(https?|file|ftp|chrome-extension|moz-extension):\\/\\/[^)\\n]+/g);\n    if (matches) {\n      return getBaseURL(matches[0]);\n    }\n  }\n\n  return '/';\n}\n\nfunction getBaseURL(url) {\n  return ('' + url).replace(/^((?:https?|file|ftp|chrome-extension|moz-extension):\\/\\/.+)?\\/[^/]+(?:\\?.*)?$/, '$1') + '/';\n}\n\nexports.getBundleURL = getBundleURLCached;\nexports.getBaseURL = getBaseURL;\n","var bundle = require('./bundle-url');\n\nfunction updateLink(link) {\n  var newLink = link.cloneNode();\n  newLink.onload = function () {\n    link.remove();\n  };\n  newLink.href = link.href.split('?')[0] + '?' + Date.now();\n  link.parentNode.insertBefore(newLink, link.nextSibling);\n}\n\nvar cssTimeout = null;\nfunction reloadCSS() {\n  if (cssTimeout) {\n    return;\n  }\n\n  cssTimeout = setTimeout(function () {\n    var links = document.querySelectorAll('link[rel=\"stylesheet\"]');\n    for (var i = 0; i < links.length; i++) {\n      if (bundle.getBaseURL(links[i].href) === bundle.getBundleURL()) {\n        updateLink(links[i]);\n      }\n    }\n\n    cssTimeout = null;\n  }, 50);\n}\n\nmodule.exports = reloadCSS;\n"]}